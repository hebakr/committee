!function(){"use strict";var e=angular.module("app",["ngComponentRouter","ngResource","ui.bootstrap"]);e.value("$routerRootComponent","appNav"),e.directive("loading",["$http",function(e){return{restrict:"A",template:'<div ng-show="showEl"><div ng-transclude></div></div>',transclude:!0,replace:!0,link:function(t,o,n){t.isLoading=function(){return e.pendingRequests.length>0},t.$watch(t.isLoading,function(e){e?t.showEl=!0:t.showEl=!1})}}}]),e.config(["$httpProvider",function(e){e.interceptors.push(["$q","$location","$window",function(e,t,o){return{request:function(e){return e.headers=e.headers||{},e.headers.Authorization="X-Basic",o.localStorage.token&&(e.headers.Authorization="Bearer "+o.localStorage.token),e},responseError:function(n){return 401!==n.status&&403!==n.status||(delete o.localStorage.token,t.path("/login")),e.reject(n)}}}])}])}(),function(){"use strict";var e=angular.module("app"),t=function(e,t){var o=this;o.isAuthorized=e.localStorage.token,o.logout=function(){t.logout(function(){window.location="/"})},o.resetMenu=function(){o.menu1=!0,o.menu2=!0,o.navCollapsed=!0}};t.$inject=["$window","Auth"],e.component("appNav",{templateUrl:"/app/components/appNav.component.html",$routeConfig:[{path:"/home",component:"homePage",name:"HomePage"},{path:"/login",component:"login",name:"Login"},{path:"/sectors",component:"sectors",name:"Sectors"},{path:"/jobs",component:"jobs",name:"Jobs"},{path:"/users",component:"users",name:"Users"},{path:"/roles",component:"roles",name:"Roles"},{path:"/settings",component:"settings",name:"Settings"},{path:"/specialities",component:"specialities",name:"Specialities"},{path:"/committee/list",component:"committeesList",name:"CommitteesList"},{path:"/committee/new",component:"createCommittee",name:"CreateCommittee"},{path:"/committee/define",component:"defineCommitteeMembers",name:"DefineCommitteeMembers"},{path:"/committee/:id/edit",component:"editCommittee",name:"EditCommittee"},{path:"/committee/:id/members",component:"membersCommittee",name:"MembersCommittee"},{path:"/committee/:id/view",component:"viewCommittee",name:"ViewCommittee"},{path:"/reports/locations",component:"locationsReport",name:"Reports.Locations"},{path:"/reports/stats",component:"statsReport",name:"Reports.Stats"},{path:"/reports/hafza",component:"havzaReport",name:"Reports.Hafza"},{path:"/reports/delivery",component:"deliveryReport",name:"Reports.Delivery"},{path:"/reports/deliveryByDateReport",component:"deliveryByDateReport",name:"Reports.DeliveryByDateReport"},{path:"/reports/type",component:"typeReport",name:"Reports.Type"},{path:"/**",redirectTo:["HomePage"]}],controller:t,controllerAs:"vm"})}(),function(){"use strict";function e(e,t){return{login:function(t,o,n){e.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",e.post("/token",t).success(o).error(n)},logout:function(e){delete t.localStorage.token,e()}}}angular.module("app").factory("Auth",e),e.$inject=["$http","$window"]}(),function(){"use strict";function e(e){return e("/api/Committees/:id",{id:"@id"},{saveCommittee:{method:"Post",url:"/api/Committees/SaveCommittee"},GetLatest:{method:"Get",url:"/api/Committees/GetLatest",isArray:!0},saveCommitteeMembers:{method:"Post",url:"/api/Committees/saveCommitteeMembers"},getViewModel:{method:"Post",url:"/api/Committees/LoadViewModel?id=:id"},getCommittee:{method:"get",url:"/api/Committees/getCommittee?id=:id"},findCommittee:{method:"get",url:"/api/Committees/findCommittee?code=:code"},findCommittees:{method:"post",url:"/api/Committees/findCommittees"},saveInspector:{method:"Post",url:"/api/Committees/SaveInspector",isArray:!0},saveAssistance:{method:"Post",url:"/api/Committees/SaveAssistance",isArray:!0},saveLab:{method:"Post",url:"/api/Committees/saveLab",isArray:!0},removeLab:{method:"get",url:"/api/Committees/removeLab"},saveDivision:{method:"Post",url:"/api/Committees/saveDivision",isArray:!0},removeDivision:{method:"get",url:"/api/Committees/removeDivision"},saveExaminor:{method:"Post",url:"/api/Committees/SaveExaminor",isArray:!0},saveObserver:{method:"Post",url:"/api/Committees/SaveObserver",isArray:!0},validateNumber:{method:"get",url:"/api/Committees/ValidateNumber"},getAppSettings:{method:"get",url:"/api/Committees/AppSettings"},saveAppSettings:{method:"post",url:"/api/Committees/AppSettings"},reOrderCommitteesNumbers:{method:"post",url:"/api/Committees/reOrderCommitteesNumbers"},deleteCommittee:{method:"post",url:"/api/Committees/DeleteCommittee"}})}angular.module("app").factory("committesApi2",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e){function t(e){return e("/api/Sectors/:id",{id:"@Id"},{update:{method:"PUT"}})}function o(){return[{id:1,name:"القاهرة",sectorId:2,sectorName:"الوجه البحرى"},{id:2,name:"الإسكندرية",sectorId:4,sectorName:"الواحات"},{id:3,name:"المنيا",sectorId:1,sectorName:"الوجه القبلى"},{id:4,name:"المنصورة",sectorId:3,sectorName:"قطاع القناة"}]}function n(e){}var i={sectors:t,addSector:n,getGovernrates:o};return i}angular.module("app").factory("committesApi",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e){return e("/api/jobs/:id",{id:"@id"},{update:{method:"PUT"}})}angular.module("app").factory("jobsApi",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e,t){var o={start:n,stop:i};return o;var n,i}angular.module("app").factory("progress",e),e.$inject=["$scope","ngProgressFactory"]}(),function(){"use strict";function e(e){return e("/api/reports/:id",{id:"@id"},{locationsReport:{method:"Get",url:"/api/reports/locationsReport"},hafzaReport:{method:"Get",url:"/api/reports/hafzaReport"},statsReport:{method:"Get",url:"/api/reports/StatsReport",isArray:!0},deliveryReport:{method:"Get",url:"/api/reports/deliveryReport",isArray:!0},deliveryByDateReport:{method:"Get",url:"/api/reports/deliveryByDateReport",isArray:!0},typeReport:{method:"Get",url:"/api/reports/typeReport",isArray:!0},sectors:{method:"Get",url:"/api/reports/GetSectors",isArray:!0}})}angular.module("app").factory("reportsApi",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e){return e("/api/roles/:id",{id:"@id"},{update:{method:"PUT"}})}angular.module("app").factory("rolesApi",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e){return e("/api/schools/:id",{id:"@id"},{update:{method:"PUT"},query:{method:"get",isArray:!1},findSchools:{method:"post",url:"/api/schools/findSchools",isArray:!0},save:{method:"post",url:"/api/schools/post"}})}angular.module("app").factory("schoolsApi",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e){return e("/api/Sectors/:id",{id:"@id"},{delete:{method:"DELETE",url:"/api/sectors/delete/:id"},update:{method:"PUT",url:"/api/sectors/put"},save:{method:"POST",url:"/api/sectors/post"},saveGov:{method:"Post",url:"/api/sectors/AddGovernrate"},updateGov:{method:"Post",url:"/api/sectors/UpdateGovernrate"},deleteGov:{method:"Delete",url:"/api/sectors/DeleteGovernrate/:id"},saveLM:{method:"Post",url:"/api/sectors/AddLM"},updateLM:{method:"Post",url:"/api/sectors/UpdateLM"},deleteLM:{method:"Delete",url:"/api/sectors/DeleteLM/:id"},saveSchool:{method:"Post",url:"/api/sectors/AddSchool"},updateSchool:{method:"Post",url:"/api/sectors/updateSchool"},deleteSchool:{method:"Delete",url:"/api/sectors/deleteSchool/:id"}})}angular.module("app").factory("sectorsApi",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e){return e("/api/specialities/:id",{id:"@id"},{update:{method:"PUT"}})}angular.module("app").factory("specialitiesApi",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e){return e("/api/users/:id",{id:"@id"},{update:{method:"PUT",url:"/api/users/put"},save:{method:"POST",url:"/api/users/post"},query:{isArray:!1},deleteUser:{method:"delete",url:"/api/users/delete"},resetPass:{method:"post",url:"/api/users/ResetPassword"}})}angular.module("app").factory("usersApi",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e){return e("/api/workPlaces/:id",{id:"@id"},{update:{method:"PUT"}})}angular.module("app").factory("workPlacesApi",e),e.$inject=["$resource"]}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.data=[],t.model={},t.$onInit=function(){o()};var o=function(){e.query(function(e){t.data=e})};t.search=function(){e.findCommittees({name:t.model.name,number:t.model.number},function(e){t.data=e.data})},t.remove=function(t){confirm("سوف يتم حذف بيانات هذه اللجنة تمام ، برجاء التأكيد \n برجاء ملاحظة ان هذه العملية لايمكن الرجوع عنها")&&e.deleteCommittee({id:t.id},function(){o()})}};t.$inject=["committesApi2"],e.component("committeesList",{templateUrl:"/app/components/committee/committeesList.component.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.model={},t.$onInit=function(){e.getViewModel({id:0},function(e){t.model=e,t.model.committee.committeType="أصلى"})},t.updateCommitteType=function(){var e=_.filter(t.model.committeeTypes,function(e){return e.selected}),o=_.map(e,"name");t.model.committee.committeType=_.join(o,"+")},t.updateLearningType=function(){var e=_.filter(t.model.learningTypes,function(e){return e.selected}),o=_.map(e,"name");t.model.committee.learningType=_.join(o,"+")},t.submit=function(o){t.model.committee.schoolId=t.model.selectedSchool.id,e.saveCommittee(t.model.committee,function(e){o?t.$router.navigate(["CreateCommittee"]):t.$router.navigate(["EditCommittee",{id:e.id,fromNew:!0}])})},t.checkNumber=function(){t.numberChanged&&t.model.committee.number&&(t.validating=!0,e.validateNumber({number:t.model.committee.number,id:t.model.committee.id},function(e){e.isValid?t.numberValid=2:t.numberValid=1,t.validating=!1}))}};t.$inject=["committesApi2"],e.component("createCommittee",{templateUrl:"/app/components/committee/committeeEditor.html",$canActivate:function(){return!0},controller:t,controllerAs:"vm",bindings:{$router:"<"}})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.model={},t.search=function(){t.committeNumber&&e.findCommittee({code:t.committeNumber},function(e){var o=e.id;t.$router.navigate(["MembersCommittee",{id:o}])},function(){alert("رقم اللجنة غير موجود")})}};t.$inject=["committesApi2"],e.component("defineCommitteeMembers",{templateUrl:"/app/components/committee/defineCommitteeMembers.html",$canActivate:function(){return!0},controller:t,controllerAs:"vm",bindings:{$router:"<"}})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.$routerOnActivate=function(o,n){var i=o.params.id;e.getViewModel({id:i},function(e){t.model=e,t.model.labEditor.studentCount||(t.model.labEditor.studentCount=0),t.model.divisionEditor.studentCount||(t.model.divisionEditor.studentCount=0)})},t.updateCommitteType=function(){var e=_.filter(t.model.committeeTypes,function(e){return e.selected}),o=_.map(e,"name");t.model.committee.committeType=_.join(o,"+")},t.updateLearningType=function(){var e=_.filter(t.model.learningTypes,function(e){return e.selected}),o=_.map(e,"name");t.model.committee.learningType=_.join(o,"+")},t.submit=function(){t.model.committee.learningManagementId=t.model.selectedLM.id,e.saveCommittee(t.model.committee,function(e){alert("تم الحفظ")})},t.checkNumber=function(){t.numberChanged&&t.model.committee.number&&(t.validating=!0,e.validateNumber({number:t.model.committee.number,id:t.model.committee.id},function(e){e.isValid?t.numberValid=2:t.numberValid=1,t.validating=!1}))},t.saveInspector=function(){e.saveInspector({committeeId:t.model.committee.id,member:t.model.inspectorEditor},function(e){t.model.committee.inspectors=e,t.model.inspectorEditor.name="",t.model.inspectorEditor.startDate="",t.model.inspectorEditor.endDate="",t.model.inspectorEditor.evaluationDate="",t.model.inspectorEditor={}})},t.editAssistance=function(e){t.model.assistanceEditor=angular.copy(e)},t.editInspector=function(e){t.model.inspectorEditor=angular.copy(e)},t.editExaminor=function(e){t.model.examinorEditor=angular.copy(e)},t.editDivision=function(e){t.model.divisionEditor=angular.copy(e),t.model.divisionEditor.name=e.title,t.model.divisionEditor.studentTypes=JSON.parse(e.studentType)},t.editLab=function(e){t.model.labEditor=angular.copy(e),t.model.labEditor.name=e.title,t.model.labEditor.studentTypes=JSON.parse(e.studentType)},t.saveAssistance=function(){e.saveAssistance({committeeId:t.model.committee.id,member:t.model.assistanceEditor},function(e){t.model.committee.assistances=e,t.model.assistanceEditor.name="",t.model.assistanceEditor.startDate="",t.model.assistanceEditor.endDate="",t.model.assistanceEditor.evaluationDate="",t.model.assistanceEditor={}})},t.saveExaminor=function(){e.saveExaminor({committeeId:t.model.committee.id,member:t.model.examinorEditor},function(e){t.model.committee.examinors=e,t.model.examinorEditor.name="",t.model.examinorEditor.startDate="",t.model.examinorEditor.endDate="",t.model.examinorEditor.evaluationDate="",t.model.examinorEditor={}})},t.saveLab=function(){e.saveLab({committeeId:t.model.committee.id,id:t.model.labEditor.id,schoolName:t.model.labEditor.schoolName,title:t.model.labEditor.name,studentCount:t.model.labEditor.studentCount,studentTypes:t.model.labEditor.studentTypes,examDate:t.model.labEditor.examDate,evalDate:t.model.labEditor.evalDate},function(e){t.model.committee.labs=e,t.model.labEditor.name="",t.model.labEditor.schoolName="",t.model.labEditor.studentCount="",t.model.labEditor.examDate="",t.model.labEditor.evalDate="",o(t.model.labEditor.studentTypes)})},t.removeLab=function(o){e.removeLab({labId:o.id,committeeId:t.model.committee.id},function(){_.remove(t.model.committee.labs,function(e){return e.id===o.id})})},t.saveDivision=function(){e.saveDivision({committeeId:t.model.committee.id,id:t.model.divisionEditor.id,title:t.model.divisionEditor.name,schoolName:t.model.divisionEditor.schoolName,studentCount:t.model.divisionEditor.studentCount,studentTypes:t.model.divisionEditor.studentTypes,examDate:t.model.divisionEditor.examDate,evalDate:t.model.divisionEditor.evalDate,workShopCount:t.model.divisionEditor.workShopCount,workShopCapacity:t.model.divisionEditor.workShopCapacity,groupsCount:t.model.divisionEditor.groupsCount},function(e){t.model.committee.divisions=e,t.model.divisionEditor.name="",t.model.divisionEditor.schoolName="",t.model.divisionEditor.studentCount="",t.model.divisionEditor.examDate="",t.model.divisionEditor.evalDate="",t.model.divisionEditor.workShopCount="",t.model.divisionEditor.workShopCapacity="",t.model.divisionEditor.groupsCoun="",o(t.model.divisionEditor.studentTypes)})};var o=function(e){for(var t=0;t<e.length;t++)e[t].count=0};t.sumCount=function(e){e.studentCount=_.sumBy(e.studentTypes,"count")},t.removeDivision=function(o){e.removeDivision({divisionId:o.id,committeeId:t.model.committee.id},function(){_.remove(t.model.committee.divisions,function(e){return e.id===o.id})})}};t.$inject=["committesApi2"],e.component("editCommittee",{templateUrl:"/app/components/committee/committeeEditor.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],t.format=t.formats[1],t.altInputFormats=["M!/d!/yyyy"],t.dateOptions={dateDisabled:!1,formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},t.model={labEditor:{studentType:"منتظم"}},t.$routerOnActivate=function(o,n){var i=o.params.id;e.getViewModel({id:i},function(e){t.model=e,t.model.committee.superInspectorEndDate&&(t.model.committee.superInspectorEndDate=new Date(t.model.committee.superInspectorEndDate)),t.model.committee.superInspectorStartDate&&(t.model.committee.superInspectorStartDate=new Date(t.model.committee.superInspectorStartDate)),t.model.committee.chiefEndDate&&(t.model.committee.chiefEndDate=new Date(t.model.committee.chiefEndDate)),t.model.committee.chiefStartDate&&(t.model.committee.chiefStartDate=new Date(t.model.committee.chiefStartDate))})},t.submit=function(){t.model.committee.chief.jobId=t.model.committee.chief.jobObj.id,t.model.committee.superInspector.jobId=t.model.committee.superInspector.jobObj.id,e.saveCommitteeMembers(t.model.committee,function(e){t.model.committee.id=e.id,t.model.committee.chief.id=e.chief.id,t.model.committee.superInspector.id=e.superInspector.id})},t.saveInspector=function(){e.saveInspector({committeeId:t.model.committee.id,member:t.model.inspectorEditor},function(e){t.model.committee.inspectors=e,t.model.inspectorEditor.name="",t.model.inspectorEditor.startDate="",t.model.inspectorEditor.endDate="",t.model.inspectorEditor.evaluationDate="",t.model.inspectorEditor={}})},t.editAssistance=function(e){t.model.assistanceEditor=angular.copy(e)},t.editInspector=function(e){t.model.inspectorEditor=angular.copy(e)},t.editExaminor=function(e){t.model.examinorEditor=angular.copy(e)},t.saveAssistance=function(){e.saveAssistance({committeeId:t.model.committee.id,member:t.model.assistanceEditor},function(e){t.model.committee.assistances=e,t.model.assistanceEditor.name="",t.model.assistanceEditor.startDate="",t.model.assistanceEditor.endDate="",t.model.assistanceEditor.evaluationDate="",t.model.assistanceEditor={}})},t.saveExaminor=function(){e.saveExaminor({committeeId:t.model.committee.id,member:t.model.examinorEditor},function(e){t.model.committee.examinors=e,t.model.examinorEditor.name="",t.model.examinorEditor.startDate="",t.model.examinorEditor.endDate="",t.model.examinorEditor.evaluationDate="",t.model.examinorEditor={}})},t.saveObserver=function(){e.saveObserver({committeeId:t.model.committee.id,member:t.model.observerEditor},function(e){t.model.committee.observers=e,t.model.observerEditor.name="",t.model.observerEditor.startDate="",t.model.observerEditor.endDate="",t.model.observerEditor.evaluationDate="",t.model.observerEditor={}})},t.editObserver=function(e){t.model.observerEditor=angular.copy(e)},t.saveLab=function(){e.saveLab({committeeId:t.model.committee.id,title:t.model.labEditor.name,studentCount:t.model.labEditor.studentCount,studentType:t.model.labEditor.studentType,examDate:t.model.labEditor.examDate,evalDate:t.model.labEditor.evalDate},function(e){t.model.committee.labs=e,t.model.labEditor.name="",t.model.labEditor.studentCount="",t.model.labEditor.studentType="منتظم",t.model.labEditor.examDate="",t.model.labEditor.evalDate=""})},t.removeLab=function(o){e.removeLab({labId:o.id,committeeId:t.model.committee.id},function(){_.remove(t.model.committee.labs,function(e){return e.id===o.id})})},t.saveDivision=function(){e.saveDivision({committeeId:t.model.committee.id,title:t.model.divisionEditor.name,studentCount:t.model.divisionEditor.studentCount},function(e){t.model.committee.divisions=e,t.model.divisionEditor.name="",t.model.divisionEditor.studentCount=""})},t.removeDivision=function(o){e.removeDivision({divisionId:o.id,committeeId:t.model.committee.id},function(){_.remove(t.model.committee.divisions,function(e){return e.id===o.id})})}};t.$inject=["committesApi2"],e.component("membersCommittee",{templateUrl:"/app/components/committee/committeeMembersEditor.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.model={},t.$routerOnActivate=function(o,n){var i=o.params.id;e.getCommittee({id:i},function(e){t.model=e})}};t.$inject=["committesApi2"],e.component("viewCommittee",{templateUrl:"/app/components/committee/viewCommittee.html",controller:t,controllerAs:"vm",bindings:{$router:"<"}})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.data=[],t.sectors=[];var o=10;t.itemToEdit={},t.currentEdit={},t.newItem="",t.edit=function(e){t.currentEdit[e.id]=!0,t.itemToEdit=angular.copy(e)},t.update=function(e){e.name=t.itemToEdit.name,t.currentEdit[e.id]=!1},t.cancelEdit=function(e){t.currentEdit[e]=!1},t.delete=function(e){_.remove(t.data,{id:e.id})},t.save=function(){t.data.push({id:o++,name:t.newItem}),t.newItem=""},t.$onInit=function(){t.data=e.getGovernrates()}};t.$inject=["committesApi"],e.component("governrates",{templateUrl:"/app/components/governrates/governrates.component.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.data=[],t.model={},t.$onInit=function(){o()};var o=function(){e.GetLatest(function(e){t.data=e})}};t.$inject=["committesApi2"],e.component("homePage",{templateUrl:"/app/components/home/home.component.html",controllerAs:"vm",controller:t})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.model={},t.$onInit=function(){n()},t.loadReport=function(){var e={sector:0,governrate:0,lm:0};t.selectedSector&&(e.sector=t.selectedSector.id),t.selectedGov&&(e.governrate=t.selectedGov.id),t.selectedGov&&(e.governrate=t.selectedGov.id),t.model.selectedLM&&(e.lm=t.model.selectedLM.id),o(e)};var o=function(o){e.deliveryByDateReport(o,function(e){t.data=e})},n=function(){e.sectors(function(e){t.sectors=e})}};t.$inject=["reportsApi"],e.component("deliveryByDateReport",{templateUrl:"/app/components/reports/deliveryByDateReport.component.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.model={},t.$onInit=function(){n()},t.loadReport=function(){var e={sector:0,governrate:0,lm:0};t.selectedSector&&(e.sector=t.selectedSector.id),t.selectedGov&&(e.governrate=t.selectedGov.id),t.selectedGov&&(e.governrate=t.selectedGov.id),t.model.selectedLM&&(e.lm=t.model.selectedLM.id),o(e)};var o=function(o){e.deliveryReport(o,function(e){t.data=e})},n=function(){e.sectors(function(e){t.sectors=e})}};t.$inject=["reportsApi"],e.component("deliveryReport",{templateUrl:"/app/components/reports/deliveryReport.component.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.model={},t.$onInit=function(){o({school:0})},t.loadReport=function(){var e={school:0};t.model.selectedSchool&&(e.school=t.model.selectedSchool.id,o(e))};var o=function(o){e.hafzaReport(o,function(e){t.data=e.school,t.sectors=e.sectors})}};t.$inject=["reportsApi"],e.component("havzaReport",{templateUrl:"/app/components/reports/hafzaReport.component.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.model={},t.$onInit=function(){o({governrate:0,sector:0})},t.loadReport=function(){var e={governrate:0,sector:0};t.model.selectedGov&&(e.governrate=t.model.selectedGov.id),t.model.selectedSector&&(e.sector=t.model.selectedSector.id),o(e)};var o=function(o){e.locationsReport(o,function(e){t.data=e.committees,t.sectors=e.sectors})}};t.$inject=["reportsApi"],e.component("locationsReport",{templateUrl:"/app/components/reports/locationsReport.component.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.model={},t.$onInit=function(){o()},t.loadReport=function(){o(params)};var o=function(){e.statsReport(function(e){t.data=e})}};t.$inject=["reportsApi"],e.component("statsReport",{templateUrl:"/app/components/reports/statsReport.component.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.model={},t.$onInit=function(){n()},t.loadReport=function(){var e={sector:0,governrate:0,lm:0};t.selectedSector&&(e.sector=t.selectedSector.id),t.selectedGov&&(e.governrate=t.selectedGov.id),t.selectedGov&&(e.governrate=t.selectedGov.id),t.model.selectedLM&&(e.lm=t.model.selectedLM.id),o(e)};var o=function(o){e.typeReport(o,function(e){t.data=e})},n=function(){e.sectors(function(e){t.sectors=e})}};t.$inject=["reportsApi"],e.component("typeReport",{templateUrl:"/app/components/reports/typeReport.component.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.data=[],t.itemToEdit={},t.currentEdit={},t.newItem="";var o=function(){e.query(function(e){t.data=e})};t.edit=function(e){t.currentEdit[e.id]=!0,t.itemToEdit=angular.copy(e)},t.update=function(e){e.title=t.itemToEdit.title,e.$update(function(){t.currentEdit[e.id]=!1,o()})},t.cancelEdit=function(e){t.currentEdit[e]=!1},t.delete=function(e){confirm("برجاء تأكيد الحذف؟")&&e.$delete(function(){o()})},t.save=function(){var n={title:t.newItem};e.save(n,function(){o()}),t.newItem=""},t.$onInit=function(){o()}};t.$inject=["jobsApi"],e.component("jobs",{templateUrl:"/app/components/jobs/jobs.component.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e,t,o,n){var i=this;i.title="LoginCtrl",i.login=function(t){t.preventDefault();var r="grant_type=password";r+="&username="+i.username,r+="&password="+i.password,o.login(r,function(e){n.localStorage.token=e.access_token,window.location="/"},function(){e.error="Invalid credentials.",i.loginFailed=!0})}};t.$inject=["$rootScope","$location","Auth","$window"],e.component("login",{templateUrl:"/app/components/login/login.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.data=[];t.itemToEdit={},t.currentEdit={},t.newItem="",t.edit=function(e){t.currentEdit[e.id]=!0,t.itemToEdit=angular.copy(e)},t.update=function(e){e.title=t.itemToEdit.title,e.$update(function(){t.currentEdit[e.id]=!1,o()})},t.cancelEdit=function(e){t.currentEdit[e]=!1},t.delete=function(e){confirm("برجاء تأكيد الحذف؟")&&e.$delete(function(){o()})},t.save=function(){var n={title:t.newItem};e.save(n,function(){o()}),t.newItem=""},t.$onInit=function(){o()};var o=function(){e.query(function(e){t.data=e})}};t.$inject=["rolesApi"],e.component("roles",{templateUrl:"/app/components/roles/roles.component.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.newSector="",t.newGov="",t.newLM="",t.itemToEdit={},t.currentEdit={},t.currentGovEdit={},t.govToEdit={},t.currentLMEdit={},t.lmToEdit={},t.currentSchoolEdit={},t.schoolToEdit={},t.data=[],t.addSector=function(){e.save({title:t.newSector},function(e){t.data.push(e),t.newSector=""})},t.delete=function(e){confirm("برجاء تأكيد الحذف؟")&&e.$delete(function(){o()})},t.edit=function(e){t.currentEdit[e.id]=!0,t.itemToEdit=angular.copy(e)},t.cancelEdit=function(e){t.currentEdit[e]=!1},t.update=function(e){e.title=t.itemToEdit.title,e.$update(function(){o(),t.currentEdit[e.id]=!1,t.itemToEdit={}})},t.addGovernrate=function(t){e.saveGov({title:t.newGov,sectorId:t.id},function(e){t.governrates||(t.governrates=[]),t.governrates.push(e),t.newGov=""})},t.editGov=function(e){t.currentGovEdit[e.id]=!0,t.govToEdit=angular.copy(e)},t.cancelGovEdit=function(e){t.currentGovEdit[e]=!1},t.updateGov=function(o){o.title=t.govToEdit.title,e.updateGov(o,function(){t.currentGovEdit[o.id]=!1,t.govToEdit={}})},t.deleteGov=function(t,o){confirm("برجاء تأكيد الحذف؟")&&e.deleteGov({id:t.id},function(){o.governrates=_.filter(o.governrates,function(e){return e.id!==t.id})})},t.addLM=function(t){e.saveLM({title:t.newLM,governrateId:t.id},function(e){t.learningManagements||(t.learningManagements=[]),t.learningManagements.push(e),t.newLM=""})},t.editLM=function(e){t.currentLMEdit[e.id]=!0,t.lmToEdit=angular.copy(e)},t.cancelLMEdit=function(e){t.currentLMEdit[e]=!1},t.updateLM=function(o){o.title=t.lmToEdit.title,e.updateLM(o,function(){t.currentLMEdit[o.id]=!1,t.lmToEdit={}})},t.deleteLM=function(t,o){confirm("برجاء تأكيد الحذف؟")&&e.deleteLM({id:t.id},function(){o.learningManagements=_.filter(o.learningManagements,function(e){return e.id!==t.id})})},t.addSchool=function(t){e.saveSchool({title:t.newSchool,learningManagementId:t.id},function(e){t.schools||(t.schools=[]),t.schools.push(e),t.newSchool=""})},t.editSchool=function(e){t.currentSchoolEdit[e.id]=!0,t.schoolToEdit=angular.copy(e)},t.cancelSchoolEdit=function(e){t.currentSchoolEdit[e]=!1},t.updateSchool=function(o){o.title=t.schoolToEdit.title,e.updateSchool(o,function(){t.currentSchoolEdit[o.id]=!1,t.schoolToEdit={}})},t.deleteSchool=function(t,o){confirm("برجاء تأكيد الحذف؟")&&e.deleteSchool({id:t.id},function(){o.schools=_.filter(o.schools,function(e){return e.id!==t.id})})},t.$onInit=function(){o()};var o=function(){t.data=e.query()}};t.$inject=["sectorsApi"],e.component("sectors",{templateUrl:"/app/components/sectors/sectors.component.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e,t){var o=this;o.data=[],o.sectors=[],o.search=!1,o.model={},o.$onInit=function(){n()};var n=function(){e.query(function(e){o.data=e.data,o.sectors=e.sectors})};o.search=function(){var t=o.model.selectedSector?o.model.selectedSector:0,n=o.model.selectedGov?o.model.selectedGov:0;e.findSchools({sector:t,governrate:n,number:o.model.committeeNumber},function(e){o.data=e,o.search=!0})},o.openDialog=function(){var e=t.open({animation:!0,backdrop:"static",component:"modalComponent",resolve:{sectors:function(){return o.sectors}}});e.result.then(function(){n()},function(){})},o.openDialogForEdit=function(e){var i=t.open({animation:!0,backdrop:"static",component:"modalComponent",resolve:{sectors:function(){return o.sectors},schoolToEdit:function(){return angular.copy(e)}}});i.result.then(function(){n()},function(){})}};t.$inject=["schoolsApi","$uibModal"],e.component("schools",{templateUrl:"/app/components/schools/schools.component.html",controller:t,controllerAs:"vm"});var o=function(e){var t=this;t.model={},t.schoolObj={},t.ok=function(){t.schoolObj={id:t.model.id,name:t.model.name,phone:t.model.phone,number:t.model.number,address:t.model.address,learningManagementId:t.model.selectedLM.id},e.save(t.schoolObj,function(){t.close()})},t.cancel=function(){t.dismiss({$value:"cancel"})},t.$onChanges=function(){t.resolve.schoolToEdit&&(t.model=t.resolve.schoolToEdit,t.model.selectedLM=t.resolve.schoolToEdit.learningManagement,t.model.selectedGov=t.resolve.schoolToEdit.learningManagement.governrate,t.model.selectedSector=t.resolve.schoolToEdit.learningManagement.governrate.sector)}};o.$inject=["schoolsApi"],e.component("modalComponent",{templateUrl:"/app/components/schools/schools.modal.component.html",bindings:{resolve:"<",close:"&",dismiss:"&"},controller:o,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.data=[];t.itemToEdit={},t.currentEdit={},t.newItem="",t.$onInit=function(){o()};var o=function(){e.query(function(e){t.data=e})};t.delete=function(e){confirm("برجاء تأكيد الحذف؟")&&e.$delete(function(){o()})},t.edit=function(e){t.currentEdit[e.id]=!0,t.itemToEdit=angular.copy(e)},t.update=function(e){e.name=t.itemToEdit.name,e.$update(function(){t.currentEdit[e.id]=!1,o()})},t.cancelEdit=function(e){t.currentEdit[e]=!1},t.save=function(){var n={name:t.newItem};e.save(n,function(){o()}),t.newItem=""}};t.$inject=["specialitiesApi"],e.component("specialities",{templateUrl:"/app/components/specialities/specialities.component.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.save=function(){e.saveAppSettings(t.data,function(){t.dataSaved=!0})},t.reorder=function(){confirm("سوف يتم إعادة ترقيم جميع اللجان المسجلة ، برجاء التأكيد؟")&&e.reOrderCommitteesNumbers(t.data,function(){t.dataReordered=!0})},t.$onInit=function(){e.getAppSettings(function(e){t.data=e})}};t.$inject=["committesApi2"],e.component("settings",{templateUrl:"/app/components/settings/settings.component.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e,t){var o=this;o.data=[],o.itemToEdit={},o.delete=function(t){e.deleteUser({id:t.id},function(){n()})},o.save=function(){var t={title:o.newItem};e.save(t,function(){n()}),o.newItem=""},o.$onInit=function(){n()};var n=function(){e.query(function(e){o.data=e.users})};o.openDialogForCreate=function(){var e=t.open({animation:!0,backdrop:"static",component:"modalUserComponentCtrl"});e.result.then(function(){n()},function(){});
},o.openDialogForEdit=function(e){var o=t.open({animation:!0,backdrop:"static",component:"modalEditUserComponentCtrl",resolve:{userToEdit:function(){return angular.copy(e)}}});o.result.then(function(){n()},function(){})},o.openDialogForChangePassword=function(e){var o=t.open({animation:!0,backdrop:"static",component:"modalChangePasswordComponentCtrl",resolve:{userToEdit:function(){return angular.copy(e)}}});o.result.then(function(){n()},function(){})}};t.$inject=["usersApi","$uibModal"],e.component("users",{templateUrl:"/app/components/users/users.component.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.data=[];t.itemToEdit={},t.currentEdit={},t.newItem="",t.edit=function(e){t.currentEdit[e.id]=!0,t.itemToEdit=angular.copy(e)},t.update=function(e){e.title=t.itemToEdit.title,e.$update(),t.currentEdit[e.id]=!1,o()},t.cancelEdit=function(e){t.currentEdit[e]=!1},t.delete=function(e){e.$delete(function(){o()})},t.save=function(){var n={title:t.newItem};e.save(n,function(){o()}),t.newItem=""},t.$onInit=function(){o()};var o=function(){t.data=e.query()}};t.$inject=["workPlacesApi"],e.component("workPlaces",{templateUrl:"/app/components/workPlaces/workPlaces.component.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.model={},t.schoolObj={},t.passwordMatch=!0,t.ok=function(){e.resetPass({id:t.model.id,userName:t.model.userName,password:t.model.password,confirmPassword:t.model.confirmPassword},function(){t.close()})},t.cancel=function(){t.dismiss({$value:"cancel"})},t.confirmPasswordChanged=function(){t.passwordMatch=t.model.password===t.model.confirmPassword},t.$onChanges=function(){t.resolve.userToEdit&&(t.model=t.resolve.userToEdit)}};t.$inject=["usersApi"],e.component("modalChangePasswordComponentCtrl",{templateUrl:"/app/components/users/changePassword.modal.component.html",bindings:{resolve:"<",close:"&",dismiss:"&"},controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.model={},t.schoolObj={},t.passwordMatch=!0,t.confirmPasswordChanged=function(){t.passwordMatch=t.model.password===t.model.confirmPassword},t.ok=function(){e.save(t.model,function(){t.close()})},t.cancel=function(){t.dismiss({$value:"cancel"})},t.$onChanges=function(){t.roles=t.resolve.roles,t.resolve.userToEdit&&(t.model=t.resolve.userToEdit)}};t.$inject=["usersApi"],e.component("modalUserComponentCtrl",{templateUrl:"/app/components/users/users.modal.component.html",bindings:{resolve:"<",close:"&",dismiss:"&"},controller:t,controllerAs:"vm"})}(),function(){"use strict";var e=angular.module("app"),t=function(e){var t=this;t.model={},t.schoolObj={},t.ok=function(){t.model.id&&e.update(t.model,function(){t.close()})},t.cancel=function(){t.dismiss({$value:"cancel"})},t.$onChanges=function(){t.roles=t.resolve.roles,t.resolve.userToEdit&&(t.model=t.resolve.userToEdit)}};t.$inject=["usersApi"],e.component("modalEditUserComponentCtrl",{templateUrl:"/app/components/users/edit.users.modal.component.html",bindings:{resolve:"<",close:"&",dismiss:"&"},controller:t,controllerAs:"vm"})}();